<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>PixelVerse | Pro Gaming Hub</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.160.0/three.min.js"></script>
    <style>
        :root { --p: #00ff88; --bg: #0d0d12; --card: #1f1f27; }
        body, html { margin: 0; padding: 0; background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; overflow: hidden; height: 100vh; }
        
        /* Dashboard */
        #portal { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; transition: 0.5s; }
        .logo { font-size: 50px; font-weight: 800; color: var(--p); text-shadow: 0 0 20px rgba(0,255,136,0.3); margin-bottom: 40px; }
        .grid { display: flex; gap: 30px; flex-wrap: wrap; justify-content: center; }
        .card { background: var(--card); border: 2px solid #2a2a35; padding: 30px; border-radius: 20px; width: 260px; cursor: pointer; transition: 0.4s; text-align: center; }
        .card:hover { border-color: var(--p); transform: translateY(-10px); box-shadow: 0 10px 30px rgba(0,255,136,0.2); }
        .card h3 { color: var(--p); margin: 15px 0 5px; }
        .card p { font-size: 14px; opacity: 0.7; }
        .icon { font-size: 60px; }

        /* Oyun Sahnesi */
        #game-container { display: none; position: fixed; inset: 0; z-index: 1000; background: #000; }
        #exit-btn { position: absolute; top: 20px; left: 20px; z-index: 5000; background: #ff4444; color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; }
        
        /* Minecraft UI */
        #mc-ui { position: absolute; inset: 0; background: rgba(0,0,0,0.85); display: none; align-items: center; justify-content: center; flex-direction: column; z-index: 2000; }
        #mc-hotbar { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); display: none; gap: 10px; z-index: 1500; }
        .slot { width: 50px; height: 50px; background: rgba(0,0,0,0.8); border: 2px solid #555; display: flex; align-items: center; justify-content: center; color: white; border-radius: 8px; }
        .slot.active { border-color: var(--p); background: rgba(0,255,136,0.2); }
        #mc-crosshair { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 24px; display: none; pointer-events: none; z-index: 1500; }

        /* Araba Oyunu UI */
        #car-hud { display: none; position: absolute; top: 80px; left: 20px; z-index: 1500; }
        .stat { background: rgba(0,0,0,0.6); padding: 10px 20px; border-radius: 10px; border-left: 4px solid var(--p); margin-bottom: 10px; font-size: 20px; }
        #speed-box { width: 200px; height: 10px; background: #333; border-radius: 5px; overflow: hidden; }
        #speed-bar { height: 100%; width: 0%; background: var(--p); transition: 0.1s; }
    </style>
</head>
<body>

<div id="portal">
    <div class="logo">PIXELVERSE</div>
    <div class="grid">
        <div class="card" onclick="startCarGame()">
            <div class="icon">üèéÔ∏è</div>
            <h3>Traffic Racer</h3>
            <p>Makas at, ara√ßlarƒ± patlat ve hƒ±zƒ±n tadƒ±nƒ± √ßƒ±kar!</p>
        </div>
        <div class="card" onclick="startMCGame()">
            <div class="icon">üåç</div>
            <h3>Online Survival</h3>
            <p>Arkada≈üƒ±nla baƒülan ve hayalindeki d√ºnyayƒ± kur.</p>
        </div>
    </div>
</div>

<div id="game-container">
    <button id="exit-btn" onclick="location.reload()">üè† PORTALA D√ñN</button>
    
    <div id="car-hud">
        <div class="stat">Skor: <span id="c-score">0</span></div>
        <div id="speed-box"><div id="speed-bar"></div></div>
    </div>

    <div id="mc-ui">
        <h2 style="color:var(--p)">Minecraft Online</h2>
        <div style="margin-bottom:20px">ID'n: <b id="my-id">Y√ºkleniyor...</b></div>
        <input type="text" id="target-id" placeholder="Arkada≈ü ID'sini gir" style="padding:12px; border-radius:8px; border:none; width:250px; margin-bottom:10px;">
        <br>
        <button onclick="mcConnect(true)" style="background:var(--p); border:none; padding:12px 30px; border-radius:8px; font-weight:bold; cursor:pointer;">D√úNYAYA KATIL</button>
        <button onclick="mcConnect(false)" style="background:#444; color:white; border:none; padding:12px 30px; border-radius:8px; margin-left:10px; cursor:pointer;">TEK OYNA</button>
    </div>
    <div id="mc-crosshair">+</div>
    <div id="mc-hotbar">
        <div class="slot active" id="sl1">1</div>
        <div class="slot" id="sl2">2</div>
        <div class="slot" id="sl3">3</div>
    </div>
</div>

<script>
let scene, camera, renderer, activeGame = null;

// --- üèéÔ∏è ARABA OYUNU MANTIƒûI ---
function startCarGame() {
    activeGame = 'car';
    document.getElementById('portal').style.display = 'none';
    document.getElementById('game-container').style.display = 'block';
    document.getElementById('car-hud').style.display = 'block';

    scene = new THREE.Scene();
    scene.background = new THREE.Color(0x87CEEB);
    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.set(0, 4, 8);
    renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.getElementById('game-container').appendChild(renderer.domElement);

    const light = new THREE.DirectionalLight(0xffffff, 1);
    light.position.set(10, 20, 10); scene.add(light);
    scene.add(new THREE.AmbientLight(0xffffff, 0.5));

    // Yol
    const road = new THREE.Mesh(new THREE.PlaneGeometry(8, 2000), new THREE.MeshPhongMaterial({ color: 0x333333 }));
    road.rotation.x = -Math.PI / 2; scene.add(road);

    // Araba Olu≈üturucu
    function createCar(color) {
        const car = new THREE.Group();
        const body = new THREE.Mesh(new THREE.BoxGeometry(1.5, 0.5, 3), new THREE.MeshPhongMaterial({ color }));
        body.position.y = 0.5; car.add(body);
        const cabin = new THREE.Mesh(new THREE.BoxGeometry(1, 0.4, 1.5), new THREE.MeshPhongMaterial({ color: 0xaaaaaa }));
        cabin.position.y = 0.9; car.add(cabin);
        return car;
    }

    const player = createCar(0x00ff00); scene.add(player);
    let speed = 0.2, score = 0, traffic = [];
    let keys = {};
    window.onkeydown = e => keys[e.code] = true;
    window.onkeyup = e => keys[e.code] = false;

    function animate() {
        if(activeGame !== 'car') return;
        requestAnimationFrame(animate);
        
        if(keys['KeyW']) speed = Math.min(speed + 0.01, 1.2); else speed = Math.max(speed - 0.01, 0.2);
        if(keys['KeyA'] && player.position.x > -3.5) player.position.x -= 0.08;
        if(keys['KeyD'] && player.position.x < 3.5) player.position.x += 0.08;

        document.getElementById('speed-bar').style.width = (speed/1.2 * 100) + "%";
        score += speed; document.getElementById('c-score').innerText = Math.floor(score);

        camera.position.lerp(new THREE.Vector3(player.position.x, 4, player.position.z + 8), 0.1);
        camera.lookAt(player.position);
        renderer.render(scene, camera);
    }
    animate();
}

// --- üåç MINECRAFT OYUNU MANTIƒûI ---
function startMCGame() {
    activeGame = 'mc';
    document.getElementById('portal').style.display = 'none';
    document.getElementById('game-container').style.display = 'block';
    document.getElementById('mc-ui').style.display = 'flex';

    const peer = new Peer('Pixel-' + Math.floor(Math.random() * 9000 + 1000));
    peer.on('open', id => document.getElementById('my-id').innerText = id);
    window.mcPeer = peer;
}

function mcConnect(isOnline) {
    document.getElementById('mc-ui').style.display = 'none';
    document.getElementById('mc-crosshair').style.display = 'block';
    document.getElementById('mc-hotbar').style.display = 'flex';
    document.body.requestPointerLock();

    scene = new THREE.Scene();
    scene.background = new THREE.Color(0x87ceeb);
    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.rotation.order = 'YXZ';
    renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.getElementById('game-container').appendChild(renderer.domElement);

    scene.add(new THREE.AmbientLight(0xffffff, 0.8));
    const sun = new THREE.DirectionalLight(0xffffff, 1);
    sun.position.set(10, 20, 10); scene.add(sun);

    const worldBlocks = [];
    const addBlock = (x, y, z, color) => {
        const b = new THREE.Mesh(new THREE.BoxGeometry(1, 1, 1), new THREE.MeshStandardMaterial({ color }));
        b.position.set(x, y, z); scene.add(b); worldBlocks.push(b);
    };

    // Zemin
    for(let x=-10; x<10; x++) for(let z=-10; z<10; z++) addBlock(x, 0, z, 0x4caf50);

    let keys = {}, yaw = 0, pitch = 0;
    window.onkeydown = e => keys[e.code] = true;
    window.onkeyup = e => keys[e.code] = false;
    window.onmousemove = e => {
        if(document.pointerLockElement) {
            yaw -= e.movementX * 0.002; pitch -= e.movementY * 0.002;
            pitch = Math.max(-1.5, Math.min(1.5, pitch));
            camera.rotation.set(pitch, yaw, 0);
        }
    };

    function animate() {
        if(activeGame !== 'mc') return;
        requestAnimationFrame(animate);
        if(document.pointerLockElement) {
            const speed = 0.12;
            if(keys['KeyW']) camera.translateZ(-speed);
            if(keys['KeyS']) camera.translateZ(speed);
            if(keys['KeyA']) camera.translateX(-speed);
            if(keys['KeyD']) camera.translateX(speed);
            camera.position.y = 1.8;
        }
        renderer.render(scene, camera);
    }
    animate();
}

// Pencere Boyutu Ayarƒ±
window.addEventListener('resize', () => {
    if(renderer) {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    }
});
</script>
</body>
</html>

